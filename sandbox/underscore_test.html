<html>

<head>
    <script src="./underscore.1.13.7-min.js"></script>
    <script type="text/javascript">
        var list = [1, 2, 3, 4, 5, 6];
        var list2 = _.range(1, 11); // [1,2,3,4,5,6,7,8,9,10]
        var users = [
            { id: 1, name: 'Alice', age: 30 },
            { id: 2, name: 'Bob', age: 25 },
            { id: 3, name: 'Charlie', age: 35 },
            { id: 4, name: 'David', age: 28 },
            { id: 5, name: 'Eve', age: 22 },
            { id: 6, name: 'Sam', age: 44 },
        ];


        // # underscore.js 예제

        // MIXIN
        var customFunctions = {
            capitalize: str => {
                if (typeof str !== 'string' || str.length === 0) return str;
                return str.charAt(0).toUpperCase() + str.slice(1).toLowerCase();
            },
            sum: arr => {
                return _.reduce(arr, (acc, val) => acc + val, 0);
            }
        }
        _.mixin(customFunctions);
        console.log(_.capitalize('hello WORLD')); // Hello world
        console.log(_.sum([1, 2, 3, 4, 5])); // 15
        console.log(_.chain("hello").capitalize().value()); // Hello
        _.sum([10, 20, 30]); // 60
        _.chain([1, 10, 15]).map(n => n * 2).sum().value(); // 52

        // loop
        var i = 0;
        var result = _.chain(list2)
            .filter(n => {
                i++;
                return n % 2 === 0;
            })
            .take(5)
            .value();
        console.log('Filtered even numbers (first 5):', result); // [2,4,6,8,10]
        console.log('Number of iterations:', i); // 10, because filter processes all elements before take limits the result

        // Functional
        _.filter(
            _.map(list, n => n * 2),
            n => n > 5
        ); // [ 6, 8, 10, 12 ]

        // Chaining
        _.chain(list)
            .map(n => n * 2)
            .filter(n => n > 5)
            .value(); // [ 6, 8, 10, 12 ]







        var fnTrue = () => true;
        console.log(_.negate(fnTrue)()); // false


        console.log(_.find(users, function (user) { return user.age > 30; })); // { id: 3, name: 'Charlie', age: 35 }
        console.log(_.findWhere(users, { name: 'Sam' })); // { id: 6, name: 'Sam', age: 44 }
        console.log(_.where(users, { age: 28 })); // [ { id: 4, name: 'David', age: 28 } ]
        console.log(_.pluck(users, 'name')); // [ 'Alice', 'Bob', 'Charlie', 'David', 'Eve', 'Sam' ]
        console.log(_.max(users, function (user) { return user.age; })); // { id: 6, name: 'Sam', age: 44 }
        console.log(_.min(users, function (user) { return user.age; })); // { id: 5, name: 'Eve', age: 22 }
        console.log(_.groupBy(users, 'age'));
        /* {
            '22': [ { id: 5, name: 'Eve', age: 22 } ],
            '25': [ { id: 2, name: 'Bob', age: 25 } ],
            '28': [ { id: 4, name: 'David', age: 28 } ],
            '30': [ { id: 1, name: 'Alice', age: 30 } ],
            '35': [ { id: 3, name: 'Charlie', age: 35 } ],
            '44': [ { id: 6, name: 'Sam', age: 44 } ]
        } */
        console.log(_.sortBy(users, 'age'));
        /* [
            { id: 5, name: 'Eve', age: 22 },
            { id: 2, name: 'Bob', age: 25 },
            { id: 4, name: 'David', age: 28 },
            { id: 1, name: 'Alice', age: 30 },
            { id: 3, name: 'Charlie', age: 35 },
            { id: 6, name: 'Sam', age: 44 }
        ] */
        console.log(_.keys(users[0])); // [ 'id', 'name', 'age' ]
        console.log(_.values(users[0])); // [ 1, 'Alice',
        console.log(_.extend({}, { a: 1, b: 2 }, { b: 3, c: 4 })); // { a: 1, b: 3, c: 4 } , 새로운 객체 생성
        console.log(_.pick({ a: 1, b: 2, c: 3 }, 'a', 'c')); // { a: 1, c: 3 }
        console.log(_.omit({ a: 1, b: 2, c: 3 }, 'b')); // { a: 1, c: 3 }


        // var list = [1, 2, 3, 4, 5, 6];
        console.log(_.first(list)); // 1
        console.log(_.last(list)); // 6
        console.log(_.initial(list)); // [ 1, 2, 3, 4, 5 ]
        console.log(_.rest(list)); // [ 2, 3, 4, 5, 6 ]
        console.log(_.compact([0, 1, false, 2, '', 3])); // [ 1, 2, 3 ]
        console.log(_.flatten([1, [2], [3, [[4]]]])); // [ 1, 2, 3, 4 ]
        console.log(_.reject(list, function (num) { return num % 2 == 0; })); // [ 1, 3, 5 ]
        console.log(_.contains(list, 3)); // true
        console.log(_.isArray(list)); // true
        console.log(_.max(list)); // 6
        console.log(_.min(list)); // 1
        console.log(_.shuffle(list)); // [ 4, 1, 6, 2, 5, 3 ] (임의 출력)
        console.log(_.sample(list, 2)); // [ 2, 5 ] (임의 출력, 2개 추출)
        console.log(_.without(list, 3, 5)); // [ 1, 2, 4, 6 ]
        console.log(_.indexOf(list, 4)); // 3
        console.log(_.lastIndexOf([1, 2, 3, 2, 1], 2)); // 3
        console.log(_.range(5)); // [ 0, 1, 2, 3, 4 ]
        console.log(_.range(1, 6, 2)); // [ 1, 3, 5 ]
        console.log(list.isArray); // undefined
        console.log(_.isArray(list)); // true

        // Underscore.js의 each와 자바스크립트의 forEach의 차이점 : 출력값이 같네?
        [1, 2, 3].forEach((val, idx, list) => {
            console.log(val, idx, list);
        });
        _.each([1, 2, 3], function (val, idx, list) {
            console.log(val, idx, list);
        });
    </script>

</head>

<body>


</body>

</html>